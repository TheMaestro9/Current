<html>

<head>
    <title>MDD</title>

    <!-- <link href='http://fonts.googleapis.com/css?family=Raleway:400,200,600' rel='stylesheet' type='text/css'> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">

    <link rel="stylesheet" href="css/common.css" />

    <link rel="stylesheet" href="css/index.css" />
</head>

<body>
    <!-- <div class="nav-animation"> </div> -->
    <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-faded nav1">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav-content" aria-controls="nav-content"
            aria-expanded="true" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="site-branding">
            <a href="#">
                <img class="logo" src="images/Logo3.png" alt="">
            </a>
        </div>


        <!-- Links -->
        <div class="collapse navbar-collapse justify-content-end" id="nav-content">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="studio.html">Studio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="projects.html">Projects</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Research</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="news.html">News</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact</a>
                </li>

            </ul>

            <!-- Brand -->
                </nav>

    <div class="super-background"></div>
    <div class="background"></div>
    <div style="display:none">
        <img src="images/02.jpg">
        <img src="images/03.jpg">
        <img src="images/04.jpg">
        <img src="images/01.jpg">
        <img src="images/06.jpg">
        <img src="images/05.jpg">
        <img src="images/07.jpg">
        <img src="images/08.jpg">
        <img src="images/09.jpg">
        <img src="images/10.jpg">
        <img src="images/11.jpg">
        <img src="images/12.jpg">
        <img src="images/13.jpg">
        <img src="images/14.jpg">
    </div>

    <div class="shade"></div>
    <div class="starting">
        <span class="center-helper"> </span>
        <img class='starting-image' src="images/logo.png">
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>

    <script src="js/jquery-3.2.1.min.js" type="text/javascript"></script>


    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
    <script src="js/navHover.js"></script>
    <script type="text/javascript">


        var dAT = 750 // default animation time 
        var DDT = 2000
        var gifDelay = 500
        var imgs = [
            { name: "01", animationTime: dAT, delay: gifDelay },
            { name: "02", animationTime: 0, delay: gifDelay },
            { name: "03", animationTime: 0, delay: gifDelay },
            { name: "04", animationTime: 0, delay: gifDelay },
            { name: "05", animationTime: 0, delay: gifDelay },
            { name: "06", animationTime: 0, delay: gifDelay },
            { name: "07", animationTime: dAT, delay: DDT },
            { name: "08", animationTime: dAT, delay: DDT },
            { name: "09", animationTime: dAT, delay: DDT },
            { name: "10", animationTime: dAT, delay: DDT },
            { name: "11", animationTime: dAT, delay: DDT },
            { name: "12", animationTime: dAT, delay: DDT },
            { name: "13", animationTime: dAT, delay: DDT },
            { name: "14", animationTime: dAT, delay: DDT }
        ]


        // main function 
        $(function () {
            // $("nav").hover(navHoverHandlerin, navHoverHandlerout)
            // animateBackground(0); 
            $('.starting-image').animate({ width: "75vw" }, 3000, function () {
                $(".starting-image,.starting").animate({ opacity: "0" }, dAT, function () {
                    $(".starting-image,.starting").css({ display: "none" })
                })
                animateBackground(0);
            })
            animateBackgroundPreLoad(0, 6, 100)
        });

        // function navHoverHandlerin() {
        //     console.log("in animage")
        //     $(".navbar").animate({ "background-color": "rgba(0,0,0,1)" }, 300);
        // }
        // function navHoverHandlerout() {
        //     $(".navbar").animate({ "background-color": "rgba(0,0,0,0)" }, 300);
        // }

        function fuckenPreLoad() {
            var image = imgs[i]
            var iteration = 0;
            $(".background").animate({ opacity: "0" }, 10, function () {
                $(".background").css({ "background-image": "url('" + getImagePath(image.name) + "')" })
                    .animate({ opacity: "1" }, 10, function () {
                        animateBackground(iteration + 1)
                    }).delay(10)

            })

        }

        function animateBackgroundPreLoad(iteration, end, time) {
            var image = getElement(imgs, iteration);

            // console.log("in preload")
            $(".background").animate({ opacity: "0" }, time, function () {
                $(".background").css({ "background-image": "url('" + getImagePath(image.name) + "')" })
                    .animate({ opacity: "1" }, time, function () {
                        console.log("in preload iteration ", iteration, end)
                        if (iteration > end) {
                            console.log("calling call back")
                            $(".background").css({ 'background-image': "none" });
                        }
                        else
                            animateBackgroundPreLoad(iteration + 1, end, time, function () {
                                console.log("calling mother call back")

                            })
                    }).delay(time)
            })

        }
        function animateBackground(iteration) {
            var image = getElement(imgs, iteration);
            // if (image.animationTime == 0 && iteration%imgs.length==0)
            //     image.animationTime = dAT
            $(".background").animate({ opacity: "0" }, image.animationTime, function () {
                $(".background").css({ "background-image": "url('" + getImagePath(image.name) + "')" })
                    .animate({ opacity: "1" }, image.animationTime, function () {
                        animateBackground(iteration + 1)
                    }).delay(image.delay)
            })

        }


        function getImagePath(imageName) {
            var dirpath = "images/";
            var extension = ".jpg";
            return dirpath + imageName + extension
        }
        function getElement(list, index) {
            var len = list.length;
            while (index < 0)
                index += len
            return list[index % len]
        }

    </script>
</body>

</html>